[gd_scene load_steps=30 format=3 uid="uid://jixp2yo2h4ng"]

[ext_resource type="Script" uid="uid://eqncict3w17y" path="res://entities/player/player.gd" id="1_symyc"]
[ext_resource type="Shader" uid="uid://3qtt18cmcq40" path="res://resources/shader/person_customiser.gdshader" id="2_fkugw"]
[ext_resource type="Script" uid="uid://d3xlrnop14c6w" path="res://entities/components/health/health.gd" id="3_sglur"]
[ext_resource type="Script" uid="uid://5tu01f6e7vnx" path="res://entities/components/colour_customizer.gd" id="4_8fjmc"]
[ext_resource type="Texture2D" uid="uid://bgqr6p7c1jvwm" path="res://resources/sprites/fancy_player_sprites.png" id="4_qiwj3"]
[ext_resource type="Script" uid="uid://cvo6uunuvk3r7" path="res://entities/player/player_hud.gd" id="7_26q78"]
[ext_resource type="Texture2D" uid="uid://00v7k67xpusu" path="res://resources/ui_components/HUD.png" id="7_qiwj3"]
[ext_resource type="Script" uid="uid://dgi6lolw2kg32" path="res://ui/hover_button.gd" id="9_bectd"]
[ext_resource type="Texture2D" uid="uid://cs06phbh864nt" path="res://resources/ui_components/menu_button.png" id="9_wvtmh"]
[ext_resource type="FontFile" uid="uid://dafxjxaalh14y" path="res://resources/font/Tiny5-Regular.ttf" id="10_7thud"]
[ext_resource type="PackedScene" uid="uid://cumjitqfsfau0" path="res://ui/settings_menu/settings_menu.tscn" id="11_7thud"]

[sub_resource type="CircleShape2D" id="CircleShape2D_fkugw"]
radius = 3.0

[sub_resource type="ShaderMaterial" id="ShaderMaterial_qiwj3"]
shader = ExtResource("2_fkugw")
shader_parameter/colour_tolerance = 0.01
shader_parameter/outline_relative_brightness = 0.7
shader_parameter/white_amount = 0.0
shader_parameter/skin_colour = Color(0, 0, 0, 1)
shader_parameter/shirt_colour = Color(0, 0, 0, 1)
shader_parameter/pants_colour = Color(0, 0, 0, 1)
shader_parameter/skin_base = Color(0.996, 0.804, 0.455, 1)
shader_parameter/skin_outline = Color(0.933, 0.486, 0.341, 1)
shader_parameter/shirt_base = Color(0.655, 0.945, 0.443, 1)
shader_parameter/shirt_outline = Color(0.224, 0.714, 0.392, 1)
shader_parameter/pants_base = Color(0.447, 0.937, 0.965, 1)
shader_parameter/pants_outline = Color(0.231, 0.365, 0.788, 1)

[sub_resource type="AtlasTexture" id="AtlasTexture_a1qjk"]
atlas = ExtResource("4_qiwj3")
region = Rect2(0, 0, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_j3ovn"]
atlas = ExtResource("4_qiwj3")
region = Rect2(72, 0, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_afbqv"]
atlas = ExtResource("4_qiwj3")
region = Rect2(90, 0, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_gx6sm"]
atlas = ExtResource("4_qiwj3")
region = Rect2(0, 18, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_yqrof"]
atlas = ExtResource("4_qiwj3")
region = Rect2(0, 36, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_8fjmc"]
atlas = ExtResource("4_qiwj3")
region = Rect2(0, 0, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_qiwj3"]
atlas = ExtResource("4_qiwj3")
region = Rect2(18, 0, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_26q78"]
atlas = ExtResource("4_qiwj3")
region = Rect2(36, 0, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_3wlsy"]
atlas = ExtResource("4_qiwj3")
region = Rect2(0, 18, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_b2kln"]
atlas = ExtResource("4_qiwj3")
region = Rect2(18, 18, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_we0b7"]
atlas = ExtResource("4_qiwj3")
region = Rect2(36, 18, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_bectd"]
atlas = ExtResource("4_qiwj3")
region = Rect2(0, 36, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_wvtmh"]
atlas = ExtResource("4_qiwj3")
region = Rect2(18, 36, 18, 18)

[sub_resource type="AtlasTexture" id="AtlasTexture_7thud"]
atlas = ExtResource("4_qiwj3")
region = Rect2(36, 36, 18, 18)

[sub_resource type="SpriteFrames" id="SpriteFrames_qiwj3"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_a1qjk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_j3ovn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_afbqv")
}],
"loop": true,
"name": &"idle_down",
"speed": 3.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_gx6sm")
}],
"loop": true,
"name": &"idle_side",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_yqrof")
}],
"loop": true,
"name": &"idle_up",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_8fjmc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qiwj3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_26q78")
}],
"loop": true,
"name": &"walk_down",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_3wlsy")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_b2kln")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_we0b7")
}],
"loop": true,
"name": &"walk_side",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_bectd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wvtmh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7thud")
}],
"loop": true,
"name": &"walk_up",
"speed": 10.0
}]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_bectd"]
bg_color = Color(0.180614, 0.719504, 0.141995, 1)

[node name="Player" type="CharacterBody2D"]
collision_layer = 2
collision_mask = 49
script = ExtResource("1_symyc")
move_speed = 400.0

[node name="CollisionShape" type="CollisionShape2D" parent="."]
position = Vector2(0, 6)
shape = SubResource("CircleShape2D_fkugw")

[node name="Sprite" type="AnimatedSprite2D" parent="."]
material = SubResource("ShaderMaterial_qiwj3")
sprite_frames = SubResource("SpriteFrames_qiwj3")
animation = &"idle_down"
script = ExtResource("4_8fjmc")

[node name="Health" type="Node" parent="."]
script = ExtResource("3_sglur")
health = 10
metadata/_custom_type_script = "uid://d3xlrnop14c6w"

[node name="Timer" type="Timer" parent="."]
autostart = true

[node name="PlayerHud" type="CanvasLayer" parent="."]
script = ExtResource("7_26q78")

[node name="UI" type="TextureRect" parent="PlayerHud"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("7_qiwj3")

[node name="Victory" type="Control" parent="PlayerHud"]
process_mode = 3
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="VictoryTitle" type="Label" parent="PlayerHud/Victory"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -23.0
offset_top = -88.0
offset_right = 31.0
offset_bottom = -65.0
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 48
text = "Victory"

[node name="Info" type="Label" parent="PlayerHud/Victory"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -47.0
offset_top = -19.0
offset_right = 50.0
offset_bottom = 4.0
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
text = "You made it!"

[node name="Menu" type="TextureButton" parent="PlayerHud/Victory"]
self_modulate = Color(0.654902, 0.945098, 0.443137, 1)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -64.0
offset_top = 19.0
offset_right = 64.0
offset_bottom = 83.0
grow_horizontal = 2
grow_vertical = 2
texture_normal = ExtResource("9_wvtmh")
ignore_texture_size = true
stretch_mode = 0
script = ExtResource("9_bectd")

[node name="Label" type="Label" parent="PlayerHud/Victory/Menu"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -22.5
offset_top = -11.5
offset_right = 22.5
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 28
text = "Menu"

[node name="Defeat" type="Control" parent="PlayerHud"]
process_mode = 3
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="DefeatTitle" type="Label" parent="PlayerHud/Defeat"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -75.0
offset_top = -107.0
offset_right = 80.0
offset_bottom = -40.0
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 48
text = "Defeat"

[node name="Info" type="Label" parent="PlayerHud/Defeat"]
layout_mode = 0
offset_left = 249.0
offset_top = 272.0
offset_right = 390.0
offset_bottom = 295.0
theme_override_colors/font_color = Color(0, 0, 0, 1)
text = "You didn't make it"

[node name="Menu" type="TextureButton" parent="PlayerHud/Defeat"]
self_modulate = Color(0.694118, 0.243137, 0.32549, 1)
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -63.0
offset_top = 15.0
offset_right = 65.0
offset_bottom = 79.0
grow_horizontal = 2
grow_vertical = 2
texture_normal = ExtResource("9_wvtmh")
ignore_texture_size = true
stretch_mode = 0
script = ExtResource("9_bectd")

[node name="Label" type="Label" parent="PlayerHud/Defeat/Menu"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -11.5
offset_right = 20.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_font_sizes/font_size = 28
text = "Menu"
horizontal_alignment = 1
vertical_alignment = 1

[node name="ProgressBar" type="ProgressBar" parent="PlayerHud"]
offset_left = 352.0
offset_top = 11.0
offset_right = 631.0
offset_bottom = 29.0
theme_override_styles/fill = SubResource("StyleBoxFlat_bectd")
show_percentage = false

[node name="Pause" type="Control" parent="PlayerHud"]
process_mode = 3
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="List" type="VBoxContainer" parent="PlayerHud/Pause"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -64.0
offset_top = -100.0
offset_right = 64.0
offset_bottom = 100.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 20

[node name="Resume" type="TextureButton" parent="PlayerHud/Pause/List"]
self_modulate = Color(0.654902, 0.945098, 0.443137, 1)
custom_minimum_size = Vector2(128, 64)
layout_mode = 2
mouse_default_cursor_shape = 2
texture_normal = ExtResource("9_wvtmh")
ignore_texture_size = true
stretch_mode = 0
script = ExtResource("9_bectd")

[node name="Label" type="Label" parent="PlayerHud/Pause/List/Resume"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -11.5
offset_right = 20.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_fonts/font = ExtResource("10_7thud")
theme_override_font_sizes/font_size = 28
text = "Resume"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Settings" type="TextureButton" parent="PlayerHud/Pause/List"]
self_modulate = Color(0.447059, 0.937255, 0.964706, 1)
custom_minimum_size = Vector2(128, 64)
layout_mode = 2
mouse_default_cursor_shape = 2
texture_normal = ExtResource("9_wvtmh")
ignore_texture_size = true
stretch_mode = 0
script = ExtResource("9_bectd")

[node name="Label" type="Label" parent="PlayerHud/Pause/List/Settings"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -11.5
offset_right = 20.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_fonts/font = ExtResource("10_7thud")
theme_override_font_sizes/font_size = 28
text = "Settings"
horizontal_alignment = 1
vertical_alignment = 1

[node name="Quit" type="TextureButton" parent="PlayerHud/Pause/List"]
self_modulate = Color(0.996078, 0.803922, 0.454902, 1)
custom_minimum_size = Vector2(128, 64)
layout_mode = 2
mouse_default_cursor_shape = 2
texture_normal = ExtResource("9_wvtmh")
ignore_texture_size = true
stretch_mode = 0
script = ExtResource("9_bectd")

[node name="Label" type="Label" parent="PlayerHud/Pause/List/Quit"]
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -11.5
offset_right = 20.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
theme_override_colors/font_color = Color(0, 0, 0, 1)
theme_override_fonts/font = ExtResource("10_7thud")
theme_override_font_sizes/font_size = 28
text = "Quit"
horizontal_alignment = 1
vertical_alignment = 1

[node name="SettingsMenu" parent="PlayerHud" instance=ExtResource("11_7thud")]
process_mode = 3
visible = false

[connection signal="damaged" from="Health" to="." method="_on_health_damaged"]
[connection signal="died" from="Health" to="PlayerHud" method="_on_health_died"]
[connection signal="timeout" from="Timer" to="." method="_on_timer_timeout"]
[connection signal="mouse_entered" from="PlayerHud/Victory/Menu" to="PlayerHud/Victory/Menu" method="_on_mouse_entered"]
[connection signal="mouse_exited" from="PlayerHud/Victory/Menu" to="PlayerHud/Victory/Menu" method="_on_mouse_exited"]
[connection signal="pressed" from="PlayerHud/Victory/Menu" to="PlayerHud" method="_on_menu_pressed"]
[connection signal="mouse_entered" from="PlayerHud/Defeat/Menu" to="PlayerHud/Defeat/Menu" method="_on_mouse_entered"]
[connection signal="mouse_exited" from="PlayerHud/Defeat/Menu" to="PlayerHud/Defeat/Menu" method="_on_mouse_exited"]
[connection signal="pressed" from="PlayerHud/Defeat/Menu" to="PlayerHud" method="_on_menu_pressed"]
[connection signal="value_changed" from="PlayerHud/ProgressBar" to="PlayerHud" method="_on_progress_bar_value_changed"]
[connection signal="mouse_entered" from="PlayerHud/Pause/List/Resume" to="PlayerHud/Pause/List/Resume" method="_on_mouse_entered"]
[connection signal="mouse_exited" from="PlayerHud/Pause/List/Resume" to="PlayerHud/Pause/List/Resume" method="_on_mouse_exited"]
[connection signal="pressed" from="PlayerHud/Pause/List/Resume" to="PlayerHud" method="_on_resume_pressed"]
[connection signal="mouse_entered" from="PlayerHud/Pause/List/Settings" to="PlayerHud/Pause/List/Settings" method="_on_mouse_entered"]
[connection signal="mouse_exited" from="PlayerHud/Pause/List/Settings" to="PlayerHud/Pause/List/Settings" method="_on_mouse_exited"]
[connection signal="pressed" from="PlayerHud/Pause/List/Settings" to="PlayerHud" method="_on_settings_pressed"]
[connection signal="mouse_entered" from="PlayerHud/Pause/List/Quit" to="PlayerHud/Pause/List/Quit" method="_on_mouse_entered"]
[connection signal="mouse_exited" from="PlayerHud/Pause/List/Quit" to="PlayerHud/Pause/List/Quit" method="_on_mouse_exited"]
[connection signal="pressed" from="PlayerHud/Pause/List/Quit" to="PlayerHud" method="_on_quit_pressed"]
